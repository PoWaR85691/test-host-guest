# Тестовый проект организации обмена между гостевой ОС и хостом

Первым делом необходимо подключить в виртуальную машину канал через меню добавления устройств (для `virt-manager`) с названием `ru.astralinux.astra-subscription.channel.0` и типом `unix`.

В проекте представлены программы для тестирования функционала обмена информацией.

* `host` запускается на хосте. Ожидает запрос от гостя и высылает ему ответ. Принимает два аргумента: путь до сокета (его можно посмотреть в меню устройств ВМ, например `/run/libvirt/qemu/channel/1-alse18/ru.astralinux.astra-subscription.channel.0`) и текстровое сообщение ответа.
* `guest` запускается на госте. Высылает запрос хосту и получает ответ. Принимает два аргумента: путь до устройства канала (`/dev/virtio-ports/ru.astralinux.astra-subscription.channel.0`) и текстровое сообщение запроса.

Программы запускать под суперпользователем.

Для обмена данным разработан простой протокол. Кадр сообщений состоит из длины типа `size_t` в бинарном варианте и следом байтов данных.